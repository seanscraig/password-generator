// Assignment Code
var generateBtn = document.querySelector("#generate");

// Write password to the #password input
function writePassword() {
  var password = generatePassword();
  var passwordText = document.querySelector("#password");

  passwordText.value = password;

}

// This function prompts the user for password criteria such as length (between 8 and 128 characters) and type of characters to include such as lowercase, uppercase, numeric, and/or special characters
function generatePassword(){
  // Character sets
  var charsLowerCase = "abcdefghijklmnopqrstuvwxyz";
  var charsUpperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  var charsNum = "0123456789";
  var charsSpecial = "!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";
  var charSet = "";
  var genPass = "";
  
  // Create a prompt to the user asking for password length must be between 8 and 128 characters and store it in a var
  var validLength = false;
  // Validate input
  while (!validLength){
    var passwordLength = prompt("Please enter the desired length of the password (Must be between 8 and 128 characters):", "enter length");
    if (passwordLength < 8 || passwordLength > 128 || isNaN(passwordLength)) {
      alert("please enter a valid length");
    } else {
      validLength = true;
    }
  }

  // Create another prompt asking which type of characters to include such as lowercase, uppercase, numeric, and/or special characters and store it in a var
  // Validate input, it is valid when at least one type has been selected
  var charLowerPrompt = confirm("Would you like to use lower case letters in your password? (i.e. abcde)");
  var charUpperPrompt = confirm("Would you like to use upper case letters in your password? (i.e. ABCDE");
  var charNumPrompt = confirm("Would you like to use numbers in your password? (i.e. 12345)");
  var charsSpecialPrompt = confirm("Would you like to use special characters in your password? (i.e. !@#$%)");

  // Once both prompts have been answered, a password will be generated by randomly selected characters from their "confirmed" charsets
  if (charLowerPrompt){
    charSet += charsLowerCase;
  }
  if (charUpperPrompt){
    charSet += charsUpperCase;
  }
  if (charNumPrompt){
    charSet += charsNum;
  }
  if (charsSpecialPrompt) {
    charSet += charsSpecial;
  }

  // We can concatenate all the randomly selected characters into one string
  while (genPass.length < passwordLength){
    genPass += charSet[Math.floor(Math.random() * charSet.length)];
  }
  
  // Return our password from the generatePassword function
  return genPass;
}

// Add event listener to generate button
generateBtn.addEventListener("click", writePassword);
